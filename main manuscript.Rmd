---
title: "Maximum tree height in the Amazon"
output: html_notebook
---

## Introduction

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

## Material and Methods

```{r, message=FALSE}
require(ggplot2)
require(raster)
require(tidyverse)
require(tmap)
require(sf)
require(sp)
require(gridExtra)
require(magrittr)

require(factoextra) 
require(randomForest)
require(caret)
```


Transects and maximum height extraction....

```{r, message=FALSE}
amaz = shapefile('./data/amazbioma.shp')
maximas = sf::as_Spatial(st_read(dsn = './data/maximum height 200222.gpkg', layer = 'pontos_wgs84'))
maximas@data = maximas@data %>% select(3)
tm_shape(amaz) + tm_polygons() + 
  tm_shape(maximas) + tm_dots("altura_cop", size = 0.4, palette = "RdYlGn")
```

U-Speed wind layer...

```{r}
uspeed = raster('./data/uspeed_500m.tif')
ref = uspeed
tm_shape(uspeed) + tm_raster()
```

The SRTM layer...

```{r}
srtm = raster('./data/srtm_500m.tif') %>% crop(ref)
srtm = raster(vals=values(srtm),
              ext=extent(ref), 
              nrows=dim(ref)[1],
              ncols=dim(ref)[2])

srtm[srtm <= 0] = NA
srtm[srtm >= 1000] = NA
tm_shape(srtm) + tm_raster(midpoint = NA, )

```